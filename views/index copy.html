<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Advanced JSON Editor Example</title>
    
    <script src="javascripts/jquery-3.6.1.min.js"></script>
    <script src="javascripts/bootstrap.bundle.min.js"></script>
    <script src="javascripts/jsoneditor.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    
  </head>
  <body>
    <h1>仪器仪表信息</h1>
    
    <p>This example demonstrates the following:</p>
    <ul>
      <li>Loading external schemas via ajax (using $ref)</li>
    </ul>
    
    <button id='submit'>Submit (console.log)</button>
    <button id='restore'>Restore to Default</button>
    <button id='enable_disable'>Disable/Enable Form</button>
    <span id='valid_indicator'></span>
    
    <div id='editor_holder'></div>
    
    <script>
      
      
      
      
      

        $.getJSON('/equipment.do', { }, function(result) {
            // Initialize the editor
            var editor = new JSONEditor(document.getElementById('editor_holder'),{
                // Enable fetching schemas via ajax
                ajax: true,
                
                // The schema for the editor
                schema: result.schema,
                
                // Seed the form with a starting value
                startval: result.data,
                
                // Disable additional properties
                no_additional_properties: true,
                
                // Require all properties by default
                required_by_default: false,

                theme:'spectre',
                iconlib :'spectre',
            });


            // Hook up the validation indicator to update its 
            // status whenever the editor changes
            editor.on('change',function() {
                // Get an array of errors from the validator
                var errors = editor.validate();
                
                var indicator = document.getElementById('valid_indicator');
                
                // Not valid
                if(errors.length) {
                    indicator.style.color = 'red';
                    indicator.textContent = "not valid";
                }
                // Valid
                else {
                    indicator.style.color = 'green';
                    indicator.textContent = "valid";
                }
            });

        });
    </script>
  </body>
</html>